# Day 17: OCI Vault Service

OCI Vault is a managed key management service that provides centralized and secure storage for encryption keys and other secrets like passwords, certificates, and SSH keys.

### Purpose of Vault
The primary goal is to remove the need for developers and administrators to store sensitive credentials and keys in configuration files or application code, which is a major security risk.

### Key Protection Modes
Vault offers two levels of protection for the Master Encryption Keys it stores:
1.  **Software:** The key is protected by software and is stored on a server. It can be exported for client-side cryptographic operations.
2.  **HSM (Hardware Security Module):** The key is stored within a physical, tamper-resistant HSM that is FIPS 140-2 Level 3 certified. The key **never leaves the HSM boundary**. All cryptographic operations involving the key are performed inside the HSM itself. This offers the highest level of security.

### Core Concept: Envelope Encryption
Vault uses a two-tiered key hierarchy known as envelope encryption to protect data.
-   **Master Encryption Key (MEK):** A highly protected key stored within the Vault (ideally in an HSM). Its sole purpose is to encrypt and decrypt Data Encryption Keys.
-   **Data Encryption Key (DEK):** A key used to encrypt and decrypt the actual customer data (e.g., an object in a bucket, a block volume).

**Workflow:**
1.  **To Encrypt Data:** A service (like Object Storage) requests a new key from Vault. Vault generates a DEK and returns two versions to the service: the plaintext DEK and the DEK encrypted by the MEK. The service uses the plaintext DEK to encrypt the data, then discards the plaintext DEK, storing only the encrypted data and the encrypted DEK.
2.  **To Decrypt Data:** The service sends the encrypted DEK to Vault. Vault uses its internal MEK to decrypt it and returns the plaintext DEK to the service. The service can then use this plaintext DEK to decrypt the customer's data.

### Key Management Features
-   **Key Rotation:** Envelope encryption makes key rotation efficient. You only need to rotate the MEK and re-encrypt the relatively small DEKs, rather than re-encrypting all of your data.
-   **Soft Deletion:** To prevent accidental and irreversible data loss, Vaults and keys are not deleted immediately. They enter a "pending deletion" state for a configurable period (7 to 30 days), during which they can be recovered.
